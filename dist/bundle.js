/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],u=r.base?c[0]+r.base:c[0],l=i[u]||0,p="".concat(u," ").concat(l);i[u]=l+1;var f=n(p),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var h=o(d,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),u=0;u<i.length;u++){var l=n(i[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},365:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,"body {\n    margin: 0;\n    padding: 0;\n    font-family: Arial, sans-serif;\n    background-color: #edeef0;\n}\n\n#game-container {\n    width: 100%;\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n    box-sizing: border-box;\n}\n\n.button {\n    background-color: #4986cc;\n    border: none;\n    color: white;\n    padding: 10px 15px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 16px;\n    margin: 5px;\n    cursor: pointer;\n    border-radius: 4px;\n}\n\n.big-button {\n    background-color: #4CAF50;\n    border: none;\n    color: white;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 18px;\n    margin: 10px;\n    cursor: pointer;\n    border-radius: 8px;\n    transition: all 0.2s ease;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.big-button:hover {\n    background-color: #45a049;\n    transform: scale(1.05);\n}\n\n.button-clicked {\n    transform: scale(0.95);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n#click-counter {\n    font-size: 24px;\n\n    margin-bottom: 20px;\n    color: #333;\n}\n\n#user-info {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px;\n    padding: 10px;\n    background-color: white;\n    border-radius: 5px;\n}\n\n#server-status {\n    margin-top: 20px;\n    padding: 10px;\n    background-color: #f5f5f5;\n    border-radius: 5px;\n}\n\n/* Добавляем эти стили в конец файла */\n\n/* Стили для таблицы лидеров */\n#leaderboard {\n    margin-top: 20px;\n    padding: 10px;\n    background-color: white;\n    border-radius: 5px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n#leaderboard h3 {\n    margin-top: 0;\n    color: #333;\n    text-align: center;\n}\n\n.leaderboard-header, .leaderboard-item {\n    display: grid;\n    grid-template-columns: 60px 1fr 80px;\n    padding: 8px 5px;\n    border-bottom: 1px solid #eee;\n}\n\n.leaderboard-header {\n    font-weight: bold;\n    color: #666;\n    border-bottom: 2px solid #ddd;\n}\n\n.leaderboard-item:last-child {\n    border-bottom: none;\n}\n\n.leaderboard-item.current-user {\n    background-color: #e6f7ff;\n    font-weight: bold;\n}\n\n.rank {\n    text-align: center;\n}\n\n.score {\n    text-align: right;\n    font-weight: bold;\n}\n\n.user-id {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n}",""]);const s=a},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},541:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function r(e,n,r){var o=function(e){var t={current:0,next:function(){return++this.current}},n={};return{add:function(r,o){var i=null!=o?o:"".concat(t.next(),"_").concat(e);return n[i]=r,i},resolve:function(e,t,r){var o=n[e];o&&(r(t)?o.resolve(t):o.reject(t),n[e]=null)}}}(r);return n((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,n=t.request_id,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["request_id"]);n&&o.resolve(n,r,(function(e){return!("error_type"in e)}))}})),function(n,r){return void 0===r&&(r={}),new Promise((function(i,a){var s=o.add({resolve:i,reject:a},r.request_id);e(n,t(t({},r),{request_id:s}))}))}}var o,i,a,s,c,u,l,p,f,d,h,v="undefined"!=typeof window,y=Boolean(v&&window.AndroidBridge),b=Boolean(v&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),m=Boolean(v&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),g=v&&!y&&!b,w=g&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),S=g?"message":"VKWebAppEvent",k=n(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile","VKWebAppGetFriends"],g&&!w?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),A=v?window.AndroidBridge:void 0,E=b?window.webkit.messageHandlers:void 0,P=g?parent:void 0;e.EAdsFormats=void 0,(i=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",i.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(a=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",a.OVERLAY="overlay",e.BannerAdLocation=void 0,(s=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",s.BOTTOM="bottom",e.BannerAdAlign=void 0,(c=e.BannerAdAlign||(e.BannerAdAlign={})).LEFT="left",c.RIGHT="right",c.CENTER="center",e.BannerAdHeightType=void 0,(u=e.BannerAdHeightType||(e.BannerAdHeightType={})).COMPACT="compact",u.REGULAR="regular",e.BannerAdOrientation=void 0,(l=e.BannerAdOrientation||(e.BannerAdOrientation={})).HORIZONTAL="horizontal",l.VERTICAL="vertical",e.EGrantedPermission=void 0,(p=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",p.LOCATION="location",p.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(f=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",f.UK="uk",f.UA="ua",f.EN="en",f.BE="be",f.KZ="kz",f.PT="pt",f.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(d=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",d.EDITOR="editor",d.MEMBER="member",d.MODER="moder",d.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(h=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",h.DESKTOP_WEB_MESSENGER="desktop_web_messenger",h.DESKTOP_APP_MESSENGER="desktop_app_messenger",h.MOBILE_WEB="mobile_web",h.MOBILE_ANDROID="mobile_android",h.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",h.MOBILE_IPHONE="mobile_iphone",h.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",h.MOBILE_IPAD="mobile_ipad";var x=function(){var e=void 0,t=[],i=Math.random().toString(36).substring(2,5);function a(e){t.push(e)}function s(e){return y?!(!A||"function"!=typeof A[e]):b?!(!E||!E[e]||"function"!=typeof E[e].postMessage):!!g&&k.includes(e)}function c(){return b||y}function u(){return g&&window.parent!==window}function l(){return c()||u()}function p(r){if(b||y)return n([],t,!0).map((function(e){return e.call(null,r)}));var o=null==r?void 0:r.data;if(g&&o){if(m&&"string"==typeof o)try{o=JSON.parse(o)}catch(r){}var i=o.type,a=o.data,s=o.frameId;i&&("VKWebAppSettings"!==i?n([],t,!0).map((function(e){return e({detail:{type:i,data:a}})})):e=s)}}m&&/(android)/i.test(navigator.userAgent)?document.addEventListener(S,p):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(S,p);var f=r((function(t,n){A&&A[t]?A[t](JSON.stringify(n)):E&&E[t]&&"function"==typeof E[t].postMessage?E[t].postMessage(n):m?window.ReactNativeWebView.postMessage(JSON.stringify({handler:t,params:n})):P&&"function"==typeof P.postMessage&&P.postMessage({handler:t,params:n,type:"vk-connect",webFrameId:e,connectVersion:"2.15.6"},"*")}),a,i);return a((function(e){e.detail&&"SetSupportedHandlers"===e.detail.type&&(o=new Set(e.detail.data.supportedHandlers))})),{send:f,sendPromise:f,subscribe:a,unsubscribe:function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},supports:function(e){return console.warn("bridge.supports method is deprecated. Use bridge.supportsAsync instead."),s(e)},supportsAsync:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(n){switch(n.label){case 0:if(y||b)return[2,s(e)];if(o)return[2,o.has(e)];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f("SetSupportedHandlers")];case 2:return t=n.sent(),o=new Set(t.supportedHandlers),[3,4];case 3:return n.sent(),o=new Set(["VKWebAppInit"]),[3,4];case 4:return[2,o.has(e)]}}))}))},isWebView:c,isIframe:u,isEmbedded:l,isStandalone:function(){return!l()}}}();e.applyMiddleware=function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.includes(void 0)||n.includes(null)?e.apply(void 0,n.filter((function(e){return"function"==typeof e}))):function(e){if(0===n.length)return e;var r,o={subscribe:e.subscribe,send:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.send.apply(e,t)}},i=n.filter((function(e){return"function"==typeof e})).map((function(e){return e(o)})).reduce((function(e,t){return function(n){return e(t(n))}}));return r=i(e.send),t(t({},e),{send:r})}},e.default=x,e.parseURLSearchParamsForGetLaunchParams=function(t){var n={};try{new URLSearchParams(t).forEach((function(t,r){switch(r){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":n[r]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":n[r]=t;break;case"odr_enabled":n.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":n[r]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":n.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":n.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":n.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return n},Object.defineProperty(e,"__esModule",{value:!0})}(t)},601:e=>{"use strict";e.exports=function(e){return e[1]}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(72),t=n.n(e),r=n(825),o=n.n(r),i=n(659),a=n.n(i),s=n(56),c=n.n(s),u=n(540),l=n.n(u),p=n(113),f=n.n(p),d=n(365),h={};h.styleTagTransform=f(),h.setAttributes=c(),h.insert=a().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=l(),t()(d.A,h),d.A&&d.A.locals&&d.A.locals;var v=n(541),y=n.n(v);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var w=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.initialized=!1,this.observers=[],this.purchases={chickenCoop:0},this.shopItems={chickenCoop:{id:"chickenCoop",name:"Курятник",description:"Автоматически добавляет +1 очко каждые 5 секунд",basePrice:50,priceFactor:1.5,image:"https://i.ibb.co/CzF8DY0/chicken-coop.png",effect:{pointsPerSecond:.2}}},this.autoClickInterval=null},(t=[{key:"incrementScore",value:function(){return this.score++,this.notifyObservers("scoreChanged",this.score),this.score}},{key:"getScore",value:function(){return this.score}},{key:"setScore",value:function(e){return this.score=e,this.notifyObservers("scoreChanged",this.score),this.score}},{key:"resetScore",value:function(){return this.score=0,this.notifyObservers("scoreChanged",this.score),this.score}},{key:"setInitialized",value:function(e){this.initialized=e}},{key:"isInitialized",value:function(){return this.initialized}},{key:"addObserver",value:function(e){this.observers.push(e)}},{key:"removeObserver",value:function(e){this.observers=this.observers.filter((function(t){return t!==e}))}},{key:"notifyObservers",value:function(e,t){this.observers.forEach((function(n){n.update&&n.update(e,t)}))}},{key:"startAutoClick",value:function(){var e=this;this.autoClickInterval&&clearInterval(this.autoClickInterval);var t=this.calculatePointsPerSecond();t>0&&(this.autoClickInterval=setInterval((function(){e.addScore(t)}),1e3))}},{key:"calculatePointsPerSecond",value:function(){var e=0;return this.purchases.chickenCoop>0&&(e+=this.purchases.chickenCoop*this.shopItems.chickenCoop.effect.pointsPerSecond),e}},{key:"getShopItem",value:function(e){return this.shopItems[e]}},{key:"getShopItems",value:function(){return this.shopItems}},{key:"getPurchases",value:function(){return this.purchases}},{key:"getItemPrice",value:function(e){var t=this.shopItems[e];if(!t)return 0;var n=this.purchases[e]||0;return Math.floor(t.basePrice*Math.pow(t.priceFactor,n))}},{key:"buyItem",value:function(e){if(!this.shopItems[e])return!1;var t=this.getItemPrice(e);return!(this.score<t||(this.score-=t,this.purchases[e]=(this.purchases[e]||0)+1,this.notifyObservers("scoreChanged",this.score),this.notifyObservers("purchaseChanged",{itemId:e,quantity:this.purchases[e]}),this.autoClickInterval,this.startAutoClick(),0))}},{key:"addScore",value:function(e){return this.score+=e,this.score=Math.round(10*this.score)/10,this.notifyObservers("scoreChanged",this.score),this.score}},{key:"setPurchases",value:function(e){this.purchases=e,this.notifyObservers("purchasesLoaded",this.purchases),this.startAutoClick()}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var E=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.firstName="Гость",this.lastName="",this.photo="",this.isGuest=!0,this.observers=[]},(t=[{key:"setUserData",value:function(e){return this.id=e.id||0,this.firstName=e.first_name||"Гость",this.lastName=e.last_name||"",this.photo=e.photo_200||"",this.isGuest=!e.id,this.notifyObservers("userChanged",this.getUserData()),this.getUserData()}},{key:"getUserData",value:function(){return{id:this.id,firstName:this.firstName,lastName:this.lastName,photo:this.photo,isGuest:this.isGuest}}},{key:"isGuestUser",value:function(){return this.isGuest}},{key:"getUserId",value:function(){return this.id}},{key:"addObserver",value:function(e){this.observers.push(e)}},{key:"removeObserver",value:function(e){this.observers=this.observers.filter((function(t){return t!==e}))}},{key:"notifyObservers",value:function(e,t){this.observers.forEach((function(n){n.update&&n.update(e,t)}))}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var O=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameElement=document.getElementById("game"),this.clickHandler=null,this.buyHandlers={}},(t=[{key:"render",value:function(e){this.gameElement&&(this.gameElement.innerHTML="\n            <div>\n                <p>Игра запущена для игрока ".concat(e,'!</p>\n                <div id="game-canvas" style="width: 100%; height: 300px; background-color: #f0f0f0; border: 1px solid #ccc; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n                    <h2 id="click-counter">Счёт: 0</h2>\n                    <button id="click-button" class="big-button">Нажми меня!</button>\n                </div>\n                <div id="leaderboard" style="margin-top: 20px; padding: 10px; background-color: white; border-radius: 5px;">\n                    <h3>Таблица лидеров</h3>\n                    <div id="leaderboard-content">Загрузка таблицы лидеров...</div>\n                </div>\n                <div id="shop" style="margin-top: 20px;">\n                    <h3>Магазин</h3>\n                    <div id="shop-items" class="shop-container">\n                        \x3c!-- Товары будут добавлены динамически --\x3e\n                    </div>\n                </div>\n            </div>\n        '),this.setupClickButton())}},{key:"setupClickButton",value:function(){var e=document.getElementById("click-button");e&&this.clickHandler&&e.addEventListener("click",this.clickHandler)}},{key:"setClickHandler",value:function(e){this.clickHandler=e,this.setupClickButton()}},{key:"updateScore",value:function(e){var t=document.getElementById("click-counter");t&&(t.textContent="Счёт: ".concat(e))}},{key:"animateClick",value:function(){var e=document.getElementById("click-button");e&&(e.classList.add("button-clicked"),setTimeout((function(){e.classList.remove("button-clicked")}),100))}},{key:"updateServerStatus",value:function(e){var t=document.getElementById("server-status");t&&(t.textContent="Статус сервера: ".concat(e))}},{key:"showServerError",value:function(){var e=document.getElementById("server-status");e&&(e.textContent="Ошибка соединения с сервером")}},{key:"renderLeaderboard",value:function(e,t){var n=document.getElementById("leaderboard-content");if(n)if(e&&0!==e.length){var r=e.map((function(e,n){var r=e.userId==t;return'\n                <div class="leaderboard-item '.concat(r?"current-user":"",'">\n                    <span class="rank">#').concat(n+1,'</span>\n                    <span class="user-id">ID: ').concat(e.userId,'</span>\n                    <span class="score">').concat(e.score,"</span>\n                </div>\n            ")})).join("");n.innerHTML='\n            <div class="leaderboard-header">\n                <span class="rank">Место</span>\n                <span class="user-id">Пользователь</span>\n                <span class="score">Очки</span>\n            </div>\n            '.concat(r,"\n        ")}else n.innerHTML="<p>Нет данных</p>"}},{key:"update",value:function(e,t){if("scoreChanged"===e)this.updateScore(t);else if("purchaseChanged"===e)this.updateShopItem(t.itemId,t.quantity);else if("purchasesLoaded"===e){var n=this.calculatePointsPerSecond(t);this.updateAutoClickInfo(n)}}},{key:"renderShopItems",value:function(e,t){var n=document.getElementById("shop-items");if(n){var r="";for(var o in e){var i=e[o],a=t[o]||0,s=this.calculateItemPrice(i,a);r+='\n                <div class="shop-item">\n                    <div class="shop-item-image">\n                        <img src="'.concat(i.image,'" alt="').concat(i.name,'">\n                    </div>\n                    <div class="shop-item-info">\n                        <h4>').concat(i.name,' <span class="quantity">').concat(a>0?"(".concat(a,")"):"","</span></h4>\n                        <p>").concat(i.description,'</p>\n                        <p>Цена: <span class="price">').concat(s,'</span> очков</p>\n                        <button class="buy-button" data-item-id="').concat(o,'">Купить</button>\n                    </div>\n                </div>\n            ')}n.innerHTML=r,this.setupBuyButtons()}}},{key:"calculateItemPrice",value:function(e,t){return Math.floor(e.basePrice*Math.pow(e.priceFactor,t))}},{key:"updateAutoClickInfo",value:function(e){var t=document.getElementById("auto-click-info");t&&(t.textContent="Авто: +".concat(e.toFixed(1)," /сек"))}},{key:"setupBuyButtons",value:function(){var e=this;document.querySelectorAll(".buy-button").forEach((function(t){var n=t.getAttribute("data-item-id");t.addEventListener("click",(function(){e.buyHandlers[n]&&e.buyHandlers[n]()}))}))}},{key:"setBuyHandler",value:function(e,t){this.buyHandlers[e]=t}},{key:"updateShopItem",value:function(e,t){var n=document.querySelector('.shop-item .buy-button[data-item-id="'.concat(e,'"]')).closest(".shop-item");if(n){var r=n.querySelector(".quantity");r&&(r.textContent=t>0?"(".concat(t,")"):"");var o=n.querySelector(".price");if(o){var i=document.querySelector('.shop-item .buy-button[data-item-id="'.concat(e,'"]')).closest(".shop-item");if(i){var a=parseFloat(i.getAttribute("data-base-price")||50),s=parseFloat(i.getAttribute("data-price-factor")||1.5),c=Math.floor(a*Math.pow(s,t));o.textContent=c}}}}},{key:"calculatePointsPerSecond",value:function(e){var t=0;return e.chickenCoop&&(t+=.2*e.chickenCoop),t}}])&&x(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}var _=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userInfoElement=document.getElementById("user-info")},(t=[{key:"render",value:function(e){this.userInfoElement&&(e.isGuest?this.userInfoElement.textContent="Гостевой режим":this.userInfoElement.innerHTML='\n                <img src="'.concat(e.photo,'" alt="Аватар" style="width: 50px; height: 50px; border-radius: 50%; margin-right: 10px;">\n                <strong>').concat(e.firstName," ").concat(e.lastName,"</strong>\n            "),this.userInfoElement.setAttribute("data-user-id",e.id))}},{key:"showError",value:function(){this.userInfoElement&&(this.userInfoElement.textContent="Не удалось загрузить информацию о пользователе")}},{key:"update",value:function(e,t){"userChanged"===e&&this.render(t)}}])&&T(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}var K=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameModel=t,this.gameView=n,this.userModel=r,this.apiService=o,this.handleClick=this.handleClick.bind(this),this.handleBuyItem=this.handleBuyItem.bind(this),this.gameView.setClickHandler(this.handleClick),this.gameModel.addObserver(this.gameView)},(t=[{key:"initGame",value:function(){var e=this;if(this.gameModel.isInitialized())console.log("Игра уже инициализирована, пропускаем повторную инициализацию");else{var t=this.userModel.getUserData();console.log("Инициализация игры для пользователя:",t.id),this.apiService.checkStatus().then((function(t){e.gameView.updateServerStatus(t.message)})).catch((function(t){e.gameView.showServerError(),console.error("Ошибка получения статуса сервера:",t)})),this.gameView.render(t.firstName),this.loadUserData(),this.initShop(),this.loadLeaderboard(),this.gameModel.setInitialized(!0)}}},{key:"loadUserScore",value:function(){var e=this,t=this.userModel.getUserId();t&&this.apiService.getScore(t).then((function(t){t>0&&t>e.gameModel.getScore()&&e.gameModel.setScore(t)})).catch((function(e){return console.error("Ошибка загрузки результата:",e)}))}},{key:"loadLeaderboard",value:function(){var e=this;this.apiService.getLeaderboard().then((function(t){var n=e.userModel.getUserId();e.gameView.renderLeaderboard(t,n)})).catch((function(e){return console.error("Ошибка загрузки таблицы лидеров:",e)}))}},{key:"handleClick",value:function(){var e=this,t=this.gameModel.incrementScore();if(this.gameView.animateClick(),t%5==0){var n=this.userModel.getUserId();this.apiService.saveScore(n,t).then((function(){e.loadLeaderboard()})).catch((function(e){return console.error("Ошибка сохранения результата:",e)}))}}},{key:"resetGame",value:function(){this.gameModel.resetScore()}},{key:"initShop",value:function(){var e=this,t=this.gameModel.getShopItems(),n=this.gameModel.getPurchases();this.gameView.renderShopItems(t,n);var r=function(t){e.gameView.setBuyHandler(t,(function(){return e.handleBuyItem(t)}))};for(var o in t)r(o);var i=this.gameModel.calculatePointsPerSecond();this.gameView.updateAutoClickInfo(i)}},{key:"handleBuyItem",value:function(e){if(this.gameModel.buyItem(e)){console.log("Товар ".concat(e," успешно куплен"));var t=this.gameModel.calculatePointsPerSecond();this.gameView.updateAutoClickInfo(t),this.saveUserData()}else console.log("Не удалось купить товар ".concat(e,". Недостаточно очков.")),alert("Недостаточно очков для покупки!")}},{key:"loadUserData",value:function(){var e=this,t=this.userModel.getUserId();t&&this.apiService.getUserData(t).then((function(t){if(t.score>0&&e.gameModel.setScore(t.score),t.purchases){e.gameModel.setPurchases(t.purchases);var n=e.gameModel.calculatePointsPerSecond();e.gameView.updateAutoClickInfo(n)}})).catch((function(e){return console.error("Ошибка загрузки данных пользователя:",e)}))}},{key:"saveUserData",value:function(){var e=this.userModel.getUserId();if(e){var t=this.gameModel.getScore(),n=this.gameModel.getPurchases();this.apiService.saveUserData(e,t,n).catch((function(e){return console.error("Ошибка сохранения данных пользователя:",e)}))}}}])&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var N=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userModel=t,this.userView=n,this.vkService=r,this.userModel.addObserver(this.userView)},(t=[{key:"loadUserInfo",value:function(){var e=this;return this.vkService.init().then((function(){return e.vkService.getUserInfo()})).then((function(t){return e.userModel.setUserData(t),e.userModel.getUserData()})).catch((function(t){return console.error("Ошибка получения информации о пользователе:",t),e.userView.showError(),e.userModel.setUserData({id:0,first_name:"Гость"}),e.userModel.getUserData()}))}},{key:"postToWall",value:function(e){var t="Я набрал ".concat(e," очков в Botania VK! Присоединяйтесь ко мне!");return this.vkService.postToWall(t,"https://vk.com/app53221746").then((function(){return alert("Пост успешно опубликован!"),!0})).catch((function(e){return alert("Не удалось опубликовать пост"),console.error("Ошибка публикации:",e),!1}))}},{key:"getFriends",value:function(){return this.vkService.getFriends().catch((function(e){return console.error("Ошибка получения списка друзей:",e),[]}))}}])&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var D=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},(t=[{key:"init",value:function(){var e=this;return this.initialized?Promise.resolve():y().send("VKWebAppInit").then((function(){console.log("VK Bridge инициализирован"),e.initialized=!0})).catch((function(e){throw console.error("Ошибка инициализации VK Bridge:",e),e}))}},{key:"getUserInfo",value:function(){return y().send("VKWebAppGetUserInfo").then((function(e){return console.log("Получена информация о пользователе:",e),e})).catch((function(e){throw console.error("Ошибка получения информации о пользователе:",e),e}))}},{key:"postToWall",value:function(e,t){return y().send("VKWebAppShowWallPostBox",{message:e,attachments:t}).then((function(e){return console.log("Пост опубликован:",e),e})).catch((function(e){throw console.error("Ошибка публикации:",e),e}))}},{key:"getFriends",value:function(){return y().send("VKWebAppGetFriends").then((function(e){return console.log("Получен список друзей:",e),e.items})).catch((function(e){throw console.error("Ошибка получения списка друзей:",e),e}))}},{key:"isAvailable",value:function(){return void 0!==y()}}])&&U(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var J=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t},(t=[{key:"checkStatus",value:function(){return fetch("".concat(this.baseUrl,"/api/status")).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Статус сервера:",e),e})).catch((function(e){throw console.error("Ошибка получения статуса сервера:",e),e}))}},{key:"saveScore",value:function(e,t){return fetch("".concat(this.baseUrl,"/api/score"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,score:t})}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Результат сохранен:",e),e})).catch((function(e){throw console.error("Ошибка сохранения результата:",e),e}))}},{key:"getScore",value:function(e){return fetch("".concat(this.baseUrl,"/api/score/").concat(e)).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Получен результат:",e),e.score})).catch((function(e){throw console.error("Ошибка получения результата:",e),e}))}},{key:"getLeaderboard",value:function(){return fetch("".concat(this.baseUrl,"/api/leaderboard")).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Получена таблица лидеров:",e),e.leaderboard})).catch((function(e){throw console.error("Ошибка получения таблицы лидеров:",e),e}))}},{key:"resetAllScores",value:function(){return fetch("".concat(this.baseUrl,"/api/scores/reset"),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Все результаты сброшены:",e),e})).catch((function(e){throw console.error("Ошибка сброса результатов:",e),e}))}},{key:"saveUserData",value:function(e,t,n){return fetch("".concat(this.baseUrl,"/api/userData"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,score:t,purchases:n})}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Данные пользователя сохранены:",e),e})).catch((function(e){throw console.error("Ошибка сохранения данных пользователя:",e),e}))}},{key:"getUserData",value:function(e){return fetch("".concat(this.baseUrl,"/api/userData/").concat(e)).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){return console.log("Получены данные пользователя:",e),e})).catch((function(e){throw console.error("Ошибка получения данных пользователя:",e),e}))}}])&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(){Z=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:x(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",y={};function b(){}function m(){}function g(){}var w={};u(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var A=g.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,s){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Y(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function x(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=I(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Y(t)+" is not iterable")}return m.prototype=g,o(A,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},E(P.prototype),u(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(A),u(A,c,"Generator"),u(A,a,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(V),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),V(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;V(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function $(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function X(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}var ee=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameModel=new w,this.userModel=new E,this.gameView=new O,this.userView=new _,this.vkService=new D,this.apiService=new J,this.userController=new N(this.userModel,this.userView,this.vkService),this.gameController=new K(this.gameModel,this.gameView,this.userModel,this.apiService),this.initShareButton()},t=[{key:"initShareButton",value:function(){var e=this,t=document.getElementById("share-button");t&&t.addEventListener("click",(function(){e.userController.postToWall(e.gameModel.getScore())}))}},{key:"start",value:(n=Z().mark((function e(){var t=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userController.loadUserInfo();case 3:this.gameController.initGame(),window.postToWall=function(){t.userController.postToWall(t.gameModel.getScore())},console.log("Приложение успешно запущено"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Ошибка запуска приложения:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){$(i,r,o,a,s,"next",e)}function s(e){$(i,r,o,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})}],t&&Q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();document.addEventListener("DOMContentLoaded",(function(){(new ee).start()}))})()})();